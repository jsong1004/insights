# AI Insights Generator - Commercialization Development Guide (Phase 1)

This document outlines the development plan for enhancing the AI Insights Generator with commercial features. This guide is designed to be used by a developer with an AI coding assistant (e.g., Gemini CLI, Cursor, Claude Code).

## Phase 1: Core Commercial Features

### 1. User Authentication with Firebase

**Goal:** Implement a robust user authentication system to manage user accounts and protect user data.

**Technology:** Firebase Authentication

**Instructions for AI Assistant:**

1.  **Install Firebase Admin SDK:** Add `firebase-admin` to `requirements-flask.txt` if it's not already there.
2.  **Initialize Firebase Admin:** In `app.py`, initialize the Firebase Admin SDK with the service account credentials.
3.  **Create User Registration and Login Routes:**
    *   Create a `/register` route that accepts a username, email, and password.
    *   Create a `/login` route that accepts an email and password.
    *   Use the Firebase Admin SDK to create and verify users.
4.  **Implement Session Management:**
    *   Use Flask sessions to store the user's ID token.
    *   Create a decorator to protect routes that require authentication.
5.  **Update Frontend:**
    *   Create new templates for registration and login (`register.html`, `login.html`).
    *   Add a "Log Out" button to the `base.html` template.

### 2. Stripe Integration for Payments

**Goal:** Integrate Stripe to handle payments for premium features.

**Technology:** Stripe API

**Instructions for AI Assistant:**

1.  **Install Stripe Python Library:** Add `stripe` to `requirements-flask.txt`.
2.  **Configure Stripe API Keys:** Add your Stripe API keys to the `.env` file.
3.  **Create a Pricing Page:**
    *   Create a new template (`pricing.html`) that displays the different pricing plans.
    *   Add a "Subscribe" button for each plan.
4.  **Create Stripe Checkout Session:**
    *   Create a `/create-checkout-session` route that creates a Stripe Checkout session.
    *   Redirect the user to the Stripe Checkout page.
5.  **Handle Stripe Webhooks:**
    *   Create a `/stripe-webhook` route to handle webhook events from Stripe.
    *   Update the user's subscription status in the Firestore database when a payment is successful.

### 3. Rate Limiting with Flask-Limiter

**Goal:** Implement rate limiting to prevent abuse and manage costs.

**Technology:** Flask-Limiter

**Instructions for AI Assistant:**

1.  **Install Flask-Limiter:** Add `Flask-Limiter` to `requirements-flask.txt`.
2.  **Initialize Flask-Limiter:** In `app.py`, initialize Flask-Limiter and configure the default rate limits.
3.  **Apply Rate Limits to Routes:**
    *   Apply a stricter rate limit to the `/generate` route to prevent users from generating too many insights in a short period of time.
    *   Apply a more lenient rate limit to other routes.

## Development Workflow with an AI Assistant

When working with your AI coding assistant, use the following workflow:

1.  **Provide Clear Instructions:** Give the AI assistant clear and concise instructions. For example, instead of saying "add authentication," say "create a `/register` route that accepts a username, email, and password and uses the Firebase Admin SDK to create a new user."
2.  **Review and Verify:** Always review the code generated by the AI assistant to ensure that it is correct, secure, and follows the project's conventions.
3.  **Iterate and Refine:** If the AI assistant doesn't generate the desired code on the first try, iterate and refine your instructions until you get the desired result.

## Next Steps

Once Phase 1 is complete, the application will be ready for commercial use. The next phase will focus on adding more advanced features, such as team collaboration, advanced analytics, and more export options.